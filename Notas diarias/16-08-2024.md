## Segment tree (árbol de segmento)

Es un árbol binario completo que sirve para **optimizar queries** (consultas) en arrays de forma *muy eficiente*. En un segment tree, cada nodo del árbol representa el resultado de la query en un *intervalo*.

La complejidad de construir el segment tree es $O(n)$, y hacer una query solo toma $O(\log(n))$.

### Casos de uso

En general, se puede aplicar para **queries en algún intervalo de un array**. Por ejemplo, sirve para calcular el *máximo* o la *suma* de un intervalo.

Además, sirve muchísimo para problemas donde nos piden **cambiar elementos del array en medio de las queries**, ya que el árbol se puede actualizar en $O(\log(n))$

### Pseudocódigo

Calcular el máximo en un rango:

```python
def segtree_max(node: Node, range: Range):
	intersection = intersect(range, node.range)

	if intersection == node.range:
		return node.max_value


	if intersection == None:
		return -Infinity

	return segtree_max(node.left, node.right)

```
